<!DOCTYPE html>
<html lang="{{ @this->lang() }}">
<head>
    <include href="blocks/head.html" />
</head>
<body class="mt-3">
<div class="container">
    <h1 class="h2 text-center">
        <a href="{{ @BASE }}/" class="nolink">
            <check if="{{ empty(@site.logo) }}">
                <true>{{ @site.name | esc }}</true>
                <false>
                    <img src="{{ @site.logo }}" alt="{{ @site.name | esc }}">
                </false>
            </check>
        </a>
    </h1>

    <br><br>

    <div class="row">
        <div class="col-sm-4 {{ @site.public_registration ? 'offset-sm-1' : 'offset-sm-4' }}">
            <form action="{{ @BASE }}/login" method="post">
                <h3 class="text-center">{{ @dict.log_in }}</h3>
                <input type="hidden" name="to" value="{{ (empty(@to) ? '/' : @to) | esc }}">
                <check if="{{ !empty(@login.error) }}">
                    <p class="alert alert-danger">{{ @login.error }}</p>
                </check>
                <div class="form-group">
                    <label for="username">{{ @dict.username }}</label>
                    <check if="{{ !empty(@POST.username) }}">
                        <true>
                            <input class="form-control" id="username" name="username" type="text" value="{{ @POST.username | esc }}" required>
                        </true>
                        <false>
                            <input class="form-control" id="username" name="username" type="text" required autofocus>
                        </false>
                    </check>
                </div>
                <div class="form-group">
                    <label for="password">{{ @dict.password }}</label>
                    <check if="{{ !empty(@POST.username) }}">
                        <true>
                            <input class="form-control" id="password" name="password" type="password" required autofocus>
                        </true>
                        <false>
                            <input class="form-control" id="password" name="password" type="password" required>
                        </false>
                    </check>
                </div>
                <button type="submit" class="btn btn-primary">{{ @dict.log_in }}</button>
                <a href="{{ @BASE }}/reset" class="btn btn-link">{{ @dict.reset_password }}</a>
            </form>
            {~ \Helper\Plugin::instance()->callHook('render.login.after_login') ~}
        </div>
        <check if="{{ @site.public_registration }}">
            <div class="col-sm-4 offset-sm-2">
                <form action="{{ @BASE }}/register" method="post">
                    <h3 class="text-center">{{ @dict.register }}</h3>
                    <input type="hidden" name="to" value="{{ empty(@to) ? '/' : @to }}">
                    <check if="{{ !empty(@register.error) }}">
                        <p class="alert alert-danger">{{ @register.error | raw }}</p>
                    </check>
                    <div class="form-group">
                        <label for="register-name">{{ @dict.name }}</label>
                        <input class="form-control" id="register-name" name="register-name" type="text" value="{{ @@POST['register-name'] | esc }}" required>
                    </div>
                    <div class="form-group">
                        <label for="register-username">{{ @dict.username }}</label>
                        <input class="form-control" id="register-username" name="register-username" type="text" value="{{ @@POST['register-username'] | esc }}" required>
                    </div>
                    <div class="form-group">
                        <label for="register-email">{{ @dict.email_address }}</label>
                        <input class="form-control" id="register-email" name="register-email" type="text" required autofocus>
                    </div>
                    <div class="form-group">
                        <label for="register-password">{{ @dict.password }}</label>
                        <input class="form-control" id="register-username" name="register-password" type="password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">{{ @dict.register }}</button>
                </form>
            </div>
        </check>
    </div>
</div>
<include href="blocks/footer-scripts.html" />
{~ \Helper\Plugin::instance()->callHook('render.login.after_footer') ~}
</body>
</html>
